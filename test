var jsonic = require('jsonic');
a = 'x=[1, "hello \\"don\'t [1,2,3] {a=b y=a}there", \'this\\\' "that" then\', {a=b, y=h}] y=z word=[1,2,[1,2,[1,2,3]]]'

console.log(a);
o='{'; 
sq=false; 
dq=false; 
si=0; 
ci=0; 
a.split('').forEach(function(x,y){ 
	c = x=='=' && !sq && !dq ? ':' : x; 
	if(!sq && !dq && x == ' ' && a[y-1] != ',') {
		c=',';
	}
	o+=c; 
	if(x=='"' && a[y-1] != '\\' && !sq) dq = !dq;  
	if(x=="'" && a[y-1] != '\\' && !dq) sq = !sq;  
}); 
o+='}';
console.log(o);
console.log(JSON.stringify(jsonic(o), null, 4));

